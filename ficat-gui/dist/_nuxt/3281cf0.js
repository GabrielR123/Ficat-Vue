(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{399:function(e,t,n){var content=n(443);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(29).default)("3320c0d4",content,!0,{sourceMap:!1})},400:function(e,t,n){var content=n(445);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(29).default)("26fc14c8",content,!0,{sourceMap:!1})},441:function(e,t,n){var map={"./af":264,"./af.js":264,"./ar":265,"./ar-dz":266,"./ar-dz.js":266,"./ar-kw":267,"./ar-kw.js":267,"./ar-ly":268,"./ar-ly.js":268,"./ar-ma":269,"./ar-ma.js":269,"./ar-sa":270,"./ar-sa.js":270,"./ar-tn":271,"./ar-tn.js":271,"./ar.js":265,"./az":272,"./az.js":272,"./be":273,"./be.js":273,"./bg":274,"./bg.js":274,"./bm":275,"./bm.js":275,"./bn":276,"./bn-bd":277,"./bn-bd.js":277,"./bn.js":276,"./bo":278,"./bo.js":278,"./br":279,"./br.js":279,"./bs":280,"./bs.js":280,"./ca":281,"./ca.js":281,"./cs":282,"./cs.js":282,"./cv":283,"./cv.js":283,"./cy":284,"./cy.js":284,"./da":285,"./da.js":285,"./de":286,"./de-at":287,"./de-at.js":287,"./de-ch":288,"./de-ch.js":288,"./de.js":286,"./dv":289,"./dv.js":289,"./el":290,"./el.js":290,"./en-au":291,"./en-au.js":291,"./en-ca":292,"./en-ca.js":292,"./en-gb":293,"./en-gb.js":293,"./en-ie":294,"./en-ie.js":294,"./en-il":295,"./en-il.js":295,"./en-in":296,"./en-in.js":296,"./en-nz":297,"./en-nz.js":297,"./en-sg":298,"./en-sg.js":298,"./eo":299,"./eo.js":299,"./es":300,"./es-do":301,"./es-do.js":301,"./es-mx":302,"./es-mx.js":302,"./es-us":303,"./es-us.js":303,"./es.js":300,"./et":304,"./et.js":304,"./eu":305,"./eu.js":305,"./fa":306,"./fa.js":306,"./fi":307,"./fi.js":307,"./fil":308,"./fil.js":308,"./fo":309,"./fo.js":309,"./fr":310,"./fr-ca":311,"./fr-ca.js":311,"./fr-ch":312,"./fr-ch.js":312,"./fr.js":310,"./fy":313,"./fy.js":313,"./ga":314,"./ga.js":314,"./gd":315,"./gd.js":315,"./gl":316,"./gl.js":316,"./gom-deva":317,"./gom-deva.js":317,"./gom-latn":318,"./gom-latn.js":318,"./gu":319,"./gu.js":319,"./he":320,"./he.js":320,"./hi":321,"./hi.js":321,"./hr":322,"./hr.js":322,"./hu":323,"./hu.js":323,"./hy-am":324,"./hy-am.js":324,"./id":325,"./id.js":325,"./is":326,"./is.js":326,"./it":327,"./it-ch":328,"./it-ch.js":328,"./it.js":327,"./ja":329,"./ja.js":329,"./jv":330,"./jv.js":330,"./ka":331,"./ka.js":331,"./kk":332,"./kk.js":332,"./km":333,"./km.js":333,"./kn":334,"./kn.js":334,"./ko":335,"./ko.js":335,"./ku":336,"./ku.js":336,"./ky":337,"./ky.js":337,"./lb":338,"./lb.js":338,"./lo":339,"./lo.js":339,"./lt":340,"./lt.js":340,"./lv":341,"./lv.js":341,"./me":342,"./me.js":342,"./mi":343,"./mi.js":343,"./mk":344,"./mk.js":344,"./ml":345,"./ml.js":345,"./mn":346,"./mn.js":346,"./mr":347,"./mr.js":347,"./ms":348,"./ms-my":349,"./ms-my.js":349,"./ms.js":348,"./mt":350,"./mt.js":350,"./my":351,"./my.js":351,"./nb":352,"./nb.js":352,"./ne":353,"./ne.js":353,"./nl":354,"./nl-be":355,"./nl-be.js":355,"./nl.js":354,"./nn":356,"./nn.js":356,"./oc-lnc":357,"./oc-lnc.js":357,"./pa-in":358,"./pa-in.js":358,"./pl":359,"./pl.js":359,"./pt":360,"./pt-br":361,"./pt-br.js":361,"./pt.js":360,"./ro":362,"./ro.js":362,"./ru":363,"./ru.js":363,"./sd":364,"./sd.js":364,"./se":365,"./se.js":365,"./si":366,"./si.js":366,"./sk":367,"./sk.js":367,"./sl":368,"./sl.js":368,"./sq":369,"./sq.js":369,"./sr":370,"./sr-cyrl":371,"./sr-cyrl.js":371,"./sr.js":370,"./ss":372,"./ss.js":372,"./sv":373,"./sv.js":373,"./sw":374,"./sw.js":374,"./ta":375,"./ta.js":375,"./te":376,"./te.js":376,"./tet":377,"./tet.js":377,"./tg":378,"./tg.js":378,"./th":379,"./th.js":379,"./tk":380,"./tk.js":380,"./tl-ph":381,"./tl-ph.js":381,"./tlh":382,"./tlh.js":382,"./tr":383,"./tr.js":383,"./tzl":384,"./tzl.js":384,"./tzm":385,"./tzm-latn":386,"./tzm-latn.js":386,"./tzm.js":385,"./ug-cn":387,"./ug-cn.js":387,"./uk":388,"./uk.js":388,"./ur":389,"./ur.js":389,"./uz":390,"./uz-latn":391,"./uz-latn.js":391,"./uz.js":390,"./vi":392,"./vi.js":392,"./x-pseudo":393,"./x-pseudo.js":393,"./yo":394,"./yo.js":394,"./zh-cn":395,"./zh-cn.js":395,"./zh-hk":396,"./zh-hk.js":396,"./zh-mo":397,"./zh-mo.js":397,"./zh-tw":398,"./zh-tw.js":398};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=c,e.exports=r,r.id=441},442:function(e,t,n){"use strict";n(399)},443:function(e,t,n){var r=n(28)(!1);r.push([e.i,"#canvas[data-v-73779cb4]{max-width:100%;max-height:75vh}.btn-margin[data-v-73779cb4]{margin:5px}",""]),e.exports=r},444:function(e,t,n){"use strict";n(400)},445:function(e,t,n){var r=n(28)(!1);r.push([e.i,".d-table[data-v-d3ee63d6]{width:100%;height:80vh;display:table}.d-cell[data-v-d3ee63d6]{display:table-cell;vertical-align:middle}.border-red[data-v-d3ee63d6]{border:1px solid red}.border-black[data-v-d3ee63d6]{border:1px solid #000}.charts[data-v-d3ee63d6]{background-color:rgba(204,201,201,.58039)}.semestre-label[data-v-d3ee63d6]{font-weight:400;font-size:.75em;letter-spacing:.1em;color:#7a7a7a}",""]),e.exports=r},517:function(e,t,n){"use strict";n.r(t);var r=n(7),c=(n(15),n(37),n(35),n(10),n(36),n(25),n(24),n(18),n(32),n(33),n(256)),o=n.n(c),l=(n(34),n(438),n(439)),d=n.n(l),h=n(98);function v(e){var t=Object(h.b)(50,100)/100;return Array.from({length:e},(function(){return"rgba(".concat(Object(h.b)(0,85),", ").concat(Object(h.b)(85,170),", ").concat(Object(h.b)(170,255),", ").concat(t,")")}))}var m={name:"Chart",props:{searchType:{type:String,default:""},acdUnitySelected:{type:Boolean,default:!1},searchId:{type:String,default:""}},data:function(){return{chart:void 0,acdUnities:[]}},computed:{getLabels:function(){return this.labelMap[this.searchType]},ctx:function(){return this.$refs&&this.$refs.canvas},labelMap:function(){return{monthly:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],semiannually:["1º semestre","2º semestre"],firstSemester:this.acdUnitySelected?"":this.acdUnities.map((function(u){return u.name})),secondSemester:this.acdUnitySelected?"":this.acdUnities.map((function(u){return u.name})),annually:this.acdUnitySelected?"":this.acdUnities.map((function(u){return u.name}))}}},mounted:function(){this.$axios.setHeader("x-xsrf-token",this.$cookies.get("xsrfToken")),!this.acdUnitySelected&&this.getAcdUnities()},methods:{createChart:function(e){this.chart&&this.chart.destroy();var t=Object.keys(e).length;this.chart=new d.a(this.ctx,{type:"bar",data:{labels:this.getLabels,datasets:[{label:"Nº de fichas registradas",data:Object.values(e),backgroundColor:v(t),borderColor:v(t),borderWidth:1}]},options:{hover:{mode:null},tooltips:{enabled:!0,callbacks:{title:function(e,data){return e[0].xLabel}}},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},downloadImage:function(){var e=this.$refs.canvas.getContext("2d");e.save(),e.globalCompositeOperation="destination-over",e.fillStyle="white",e.fillRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),e.restore();var link=document.createElement("a");link.setAttribute("download","gráfico.png"),link.setAttribute("href",this.chart.toBase64Image()),document.body.appendChild(link),link.click(),document.body.removeChild(link)},getReport:function(e){window.open("/api/catalogCards/reportResult?pdfToken="+this.searchId,"_blank")},getAcdUnities:function(){var e=this;this.$axios.get("/api/academicUnities").then((function(t){var data=t.data;e.acdUnities=data.map((function(e){return{id:e.id,name:e.name}}))}))}}},j=(n(442),n(17));function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _={name:"Statistics",layout:"adminLayout",middleware:"auth",components:{Chart:Object(j.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.searchId.length,expression:"searchId.length"}]},[n("canvas",{ref:"canvas",attrs:{id:"canvas"}}),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"level"},[n("div",{staticClass:"level-left"}),e._v(" "),n("div",{staticClass:"level-right"},[n("b-button",{staticClass:"btn-margin",attrs:{"icon-right":"download"},on:{click:e.downloadImage}}),e._v(" "),n("b-button",{staticClass:"btn-margin",attrs:{disabled:!e.searchId,"icon-right":"file-pdf"},on:{click:e.getReport}})],1)])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.searchId,expression:"!searchId"}],staticStyle:{"text-align":"center"}},[n("p",[e._v("Use os controles ao lado para pesquisar")])])])}),[],!1,null,"73779cb4",null).exports},data:function(){return{years:[],courses:[],searchYear:(new Date).getFullYear(),searchPeriod:"annually",searchCourseType:"",loading:!1,acdUnityPreviousSearch:"",academicUnities:[],month:"",semester:"",selectedAcdUnity:void 0,selectedCourse:void 0,searchId:"",tooltip:""}},watch:{selectedAcdUnity:function(){this.selectedCourse=void 0}},mounted:function(){this.$axios.setHeader("x-xsrf-token",this.$cookies.get("xsrfToken")),this.getYears()},methods:{getYears:function(){var e=this;this.$axios.get("/api/catalogCards/oldest").then((function(t){var data=t.data,n=e.searchYear-data.year+1;e.years=Array.from({length:n},(function(t,i){return e.searchYear-i}))}))},getAcdUnitiesByTerm:o()((function(e){var t=this;if(!e.length)return this.academicUnities=[],void(this.acdUnityPreviousSearch="");e!==this.acdUnityPreviousSearch&&(this.loading=!0,this.acdUnityPreviousSearch=e,this.$axios.get("/api/academicUnities",{params:{term:e}}).then((function(e){t.academicUnities=e.data})).catch().finally((function(){return t.loading=!1})))}),500),getCoursesByAcdUnity:function(e){var t=this;this.$axios.get("/api/courses",{params:{unityAcronym:e}}).then((function(e){var data=e.data;t.courses=data})).catch((function(e){return console.log(e)})).finally((function(){return t.loading=!1}))},onSelectedAcdUnity:function(option){this.selectedAcdUnity=option,this.selectedAcdUnity&&this.getCoursesByAcdUnity(this.selectedAcdUnity.acronym)},getSemesterIndex:function(){return"firstSemester"===this.searchPeriod?"0":"secondSemester"===this.searchPeriod?"1":null},onSubmit:function(){var e=this;this.$axios.post("/api/catalogCards/q",y(y(y(y(y({year:+this.searchYear},Object(h.a)("month",this.month)),Object(h.a)("semester",this.getSemesterIndex())),Object(h.a)("unityName",this.selectedAcdUnity&&this.selectedAcdUnity.name)),Object(h.a)("courseName",this.selectedCourse)),Object(h.a)("type",this.searchCourseType)),{params:{searchType:this.searchPeriod}}).then((function(t){e.searchId=t.headers.pdftoken,e.$refs.chart.createChart(t.data)}))}}},k=(n(444),Object(j.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("section",{staticClass:"section columns is-full-page"},[n("aside",{staticClass:"column is-3"},[n("p",{staticClass:"menu-label title is-hidden-touch has-text-left"},[e._v("\n        Filtros\n      ")]),e._v(" "),n("br"),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[n("p",{staticClass:"menu-label is-capitalized"},[e._v("\n          Ano\n        ")]),e._v(" "),n("b-field",[n("b-select",{attrs:{"aria-placeholder":"Selecionar ano",rounded:"",size:"is-small"},model:{value:e.searchYear,callback:function(t){e.searchYear=t},expression:"searchYear"}},e._l(e.years,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v("\n              "+e._s(t)+"\n            ")])})),0)],1),e._v(" "),n("br"),e._v(" "),n("p",{staticClass:"menu-label is-capitalized"},[e._v("\n          Período\n        ")]),e._v(" "),n("section",[n("div",{staticClass:"field"},[n("b-radio",{attrs:{size:"is-small","native-value":"monthly",type:"is-info"},model:{value:e.searchPeriod,callback:function(t){e.searchPeriod=t},expression:"searchPeriod"}},[e._v("\n              Mensal\n            ")])],1),e._v(" "),n("div",{staticClass:"field"},[n("b-radio",{attrs:{size:"is-small","native-value":"firstSemester",type:"is-info"},model:{value:e.searchPeriod,callback:function(t){e.searchPeriod=t},expression:"searchPeriod"}},[e._v("\n              1º Semestre\n            ")]),e._v(" "),n("b-radio",{attrs:{size:"is-small","native-value":"secondSemester",type:"is-info"},model:{value:e.searchPeriod,callback:function(t){e.searchPeriod=t},expression:"searchPeriod"}},[e._v("\n              2º Semestre\n            ")])],1),e._v(" "),n("div",{staticClass:"field"},[n("b-radio",{attrs:{size:"is-small","native-value":"annually",type:"is-info"},model:{value:e.searchPeriod,callback:function(t){e.searchPeriod=t},expression:"searchPeriod"}},[e._v("\n              Anual\n            ")])],1)]),e._v(" "),n("br"),e._v(" "),e._m(0),e._v(" "),n("b-field",[n("b-select",{attrs:{placeholder:"Selecione","aria-placeholder":"Selecione",size:"is-small",rounded:""},model:{value:e.searchCourseType,callback:function(t){e.searchCourseType=t},expression:"searchCourseType"}},[n("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),n("option",{attrs:{value:"tccGraduation"}},[e._v("Graduação")]),e._v(" "),n("option",{attrs:{value:"tccExpert"}},[e._v("Especialização")]),e._v(" "),n("option",{attrs:{value:"dissertation"}},[e._v("Mestrado")]),e._v(" "),n("option",{attrs:{value:"thesis"}},[e._v("Doutorado")])])],1),e._v(" "),n("br"),e._v(" "),n("p",{staticClass:"menu-label is-capitalized"},[e._v("\n          Unidade Acadêmica\n        ")]),e._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-half"},[n("b-field",[n("b-tooltip",{attrs:{label:e.tooltip,active:!!e.acdUnityPreviousSearch.length,position:"is-right"}},[n("b-autocomplete",{attrs:{data:e.academicUnities,loading:e.loading,field:"acronym",placeholder:"Buscar","aria-placeholder":"Buscar",rounded:"",icon:"magnify",size:"is-small"},on:{typing:e.getAcdUnitiesByTerm,select:e.onSelectedAcdUnity},scopedSlots:e._u([{key:"default",fn:function(t){var option=t.option;return[n("span",{on:{mouseover:function(t){e.tooltip=option.name}}},[e._v("\n                      "+e._s(option.acronym)+"\n                    ")])]}}])},[e._v(" "),n("template",{slot:"empty"},[e._v("\n                    Nenhum resultado encontrado\n                  ")])],2)],1)],1)],1)]),e._v(" "),e.selectedAcdUnity?[n("p",{staticClass:"menu-label is-capitalized"},[e._v("\n            Curso\n          ")]),e._v(" "),n("b-field",[n("b-select",{attrs:{placeholder:"Selecione","aria-placeholder":"Selecione",size:"is-small",rounded:""},model:{value:e.selectedCourse,callback:function(t){e.selectedCourse=t},expression:"selectedCourse"}},e._l(e.courses,(function(t){return n("option",{key:t.id,domProps:{value:t.name}},[e._v("\n                "+e._s(t.name)+"\n              ")])})),0)],1)]:e._e(),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-10"},[n("b-button",{staticClass:"is-info",attrs:{"native-type":"submit"}},[e._v("\n              Buscar\n            ")])],1)])],2)]),e._v(" "),n("div",{staticClass:"column is-9 charts is-fullheight"},[n("div",{staticClass:"d-table"},[n("div",{staticClass:"d-cell"},[n("chart",{ref:"chart",attrs:{"search-id":e.searchId,"search-type":e.searchPeriod,"acd-unities":e.academicUnities,"acd-unity-selected":!!e.selectedAcdUnity}})],1)])])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"menu-label is-capitalized"},[e._v("\n          Tipo "),n("span",{staticClass:"is-lowercase"},[e._v("de")]),e._v(" Curso\n        ")])}],!1,null,"d3ee63d6",null));t.default=k.exports}}]);